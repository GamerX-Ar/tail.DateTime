/* pytesNET/tail.DateTime v.0.4.11 | Basic Version | @author SamBrishes, pytesNET <sam@pytes.net> | @license MIT */
(function(a,b){"function"==typeof define&&define.amd?define(function(){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(a):("undefined"==typeof a.tail&&(a.tail={}),a.tail.DateTime=a.tail.datetime=b(a),"undefined"!=typeof jQuery&&(jQuery.fn.DateTime=jQuery.fn.datetime=function(a){var b,c=[];return this.each(function(){!1!==(b=tail.DateTime(this,a))&&c.push(b)}),1===c.length?c[0]:0!==c.length&&c}),"undefined"!=typeof MooTools&&(Element.implement({DateTime:function(a){return new tail.DateTime(this,a)}}),Element.implement({datetime:function(a){return new tail.DateTime(this,a)}})))})(this,function(c){"use strict";function f(a,b){return!!a.classList&&a.classList.contains(b)}function g(a,b){return!!(a.classList&&a.classList.add(b))&&a}function h(a,b){return!!(a.classList.remove&&a.classList.remove(b))&&a}function j(a,b,c){if(CustomEvent&&CustomEvent.name)var d=new CustomEvent(b,c);else{var d=n.createEvent("CustomEvent");d.initCustomEvent(b,!!c.bubbles,!!c.cancelable,c.detail)}return a.dispatchEvent(d)}function k(a,b){return Object.assign({},a,b||{})}function l(a){return a.charAt(0).toUpperCase()+a.slice(1)}function m(a,b,c){var d=a instanceof Date?a:!!a&&new Date(a);return d instanceof Date&&!isNaN(d.getDate())&&(c?d.setHours(0,0,0,0):d,!0===b?d.getTime():d)}var n=c.document,a=function(b,c){if(b="string"==typeof b?n.querySelectorAll(b):b,b instanceof NodeList||b instanceof HTMLCollection||b instanceof Array){for(var d=[],e=b.length,f=0;f<e;f++)d.push(new a(b[f],c));return 1===d.length?d[0]:0!==d.length&&d}if(!(b instanceof Element))return!1;if(!(this instanceof a))return new a(b,c);if(a.inst[b.getAttribute("data-tail-datetime")])return a.inst[b.getAttribute("data-tail-datetime")];if(b.getAttribute("data-datetime")){var g=JSON.parse(b.getAttribute("data-datetime").replace(/\'/g,"\""));g instanceof Object&&(c=k(c,g))}return this.e=b,this.id=++a.count,this.con=k(a.defaults,c),a.inst["tail-"+this.id]=this,this.init()};return a.version="0.4.11",a.status="beta",a.count=0,a.inst={},a.defaults={animate:!0,classNames:!1,closeButton:!0,dateFormat:"YYYY-mm-dd",dateStart:!1,dateRanges:[],dateBlacklist:!0,dateEnd:!1,locale:"en",position:"bottom",rtl:"auto",startOpen:!1,stayOpen:!1,timeFormat:"HH:ii:ss",timeHours:null,timeMinutes:null,timeSeconds:0,timeIncrement:!0,timeStepHours:1,timeStepMinutes:5,timeStepSeconds:5,today:!0,tooltips:[],viewDefault:"days",viewDecades:!0,viewYears:!0,viewMonths:!0,viewDays:!0,weekStart:0},a.strings={en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shorts:["SUN","MON","TUE","WED","THU","FRI","SAT"],time:["Hours","Minutes","Seconds"],header:["Select a Month","Select a Year","Select a Decade","Select a Time"]},modify:function(a,b,c){if(!(a in this))return!1;if(b instanceof Object)for(var d in b)this.modify(a,d,b[d]);else this[a][b]="string"==typeof c?c:this[a][b];return!0},register:function(a,b){return!!("string"==typeof a&&b instanceof Object)&&(this[a]=b,!0)}},a.prototype={init:function(){var b=this;if(this.__=k(a.strings.en,a.strings[this.con.locale]||{}),this.con.dateStart=m(this.con.dateStart,!0,!0)||0,this.con.dateEnd=m(this.con.dateEnd,!0,!0)||9999999999999,this.con.viewDefault=this.con.dateFormat?this.con.viewDefault:"time","string"==typeof this.con.weekStart&&(this.con.weekStart=a.strings.en.shorts.indexOf(this.con.weekStart)),0>this.con.weekStart&&6<this.con.weekStart&&(this.con.weekStart=0),0<this.con.dateRanges.length){for(var c=[],d=this.con.dateRanges,g=d.length,h=0;h<g;h++)d[h]instanceof Object&&(d[h].start||d[h].days)&&(!1===(d[h].start=m(d[h].start||!1,!0,!0))?d[h].start=d[h].end=1/0:(!1===(d[h].end=m(d[h].end||!1,!0,!0))&&(d[h].end=d[h].start),d[h].start=d[h].start>d[h].end?d[h].end:d[h].start),d[h].days=!("days"in d[h])||d[h].days,d[h].days="boolean"==typeof d[h].days?[0,1,2,3,4,5,6]:function(b){for(var c=[],d=b.length,e=0;e<d;e++)"string"==typeof b[e]&&(b[e]=a.strings.en.shorts.indexOf(b[e])),0<=b[e]&&6>=b[e]&&c.push(b[e]);return c}(d[h].days instanceof Array?d[h].days:[d[h].days]),c.push({start:d[h].start,end:d[h].end,days:d[h].days}));this.con.dateRanges=c}if(0<this.con.tooltips.length){for(var j,d,c=[],o=this.con.tooltips,g=o.length,h=0;h<g;h++)o[h]instanceof Object&&o[h].date&&(o[h].date instanceof Array?(j=m(o[h].date[0]||!1,!0,!0),d=m(o[h].date[1]||!1,!0,!0)||j):j=d=m(o[h].date||!1,!0,!0),!!j)&&c.push({date:j===d?j:[j,d],text:o[h].text||"Tooltip",color:o[h].color||"inherit",element:o[h].element||function(a){return a.className="calendar-tooltip",a.innerHTML="<div class=\"tooltip-inner\">"+o[h].text||"Tooltip</div>",a}(n.createElement("DIV"))});this.con.tooltips=c}var p=this.__.shorts.slice(this.con.weekStart).concat(this.__.shorts.slice(0,this.con.weekStart));this.weekdays="<thead>\n<tr>\n";for(var h=0;7>h;h++)this.weekdays+="<th class=\"calendar-week\">"+p[h]+"</th>";this.weekdays+="\n</tr>\n</thead>",this.select=m(this.e.getAttribute("data-value")||this.e.value),(!this.select||this.select<this.con.dateStart||this.select>this.con.dateEnd)&&(this.select=null),null==this.view&&(this.view={type:this.con.viewDefault,date:this.select||new Date});for(var g=["Hours","Minutes","Seconds"],h=0;3>h;h++)"number"==typeof this.con["time"+g[h]]&&this.view.date["set"+g[h]](this.con["time"+g[h]]);if(this.events={},this.dt=this.renderCalendar(),null==this._bind){var d="addEventListener";this.e[d]("focusin",function(){b.open.call(b)}),this.e[d]("keyup",function(a){b.bind.call(b,a)}),n[d]("keyup",function(a){b.dt.contains(a.target)&&b.bind.call(b,a)}),n[d]("click",function(a){b.dt.contains(a.target)?b.bind.call(b,a):!b.e.contains(a.target)&&f(b.dt,"calendar-open")&&a.target!=b.dt&&a.target!=b.e&&!b.con.stayOpen&&b.close.call(b)}),n[d]("mouseover",function(a){b.dt.contains(a.target)&&b.bind.call(b,a)}),this._bind=!0}return this.e.setAttribute("data-tail-datetime","tail-"+this.id),this.con.startOpen&&this.open(),this.select&&this.selectDate(this.select),this},bind:function(a){var b,c=a.target,d=c.getAttribute("data-action")?c:c.parentElement.getAttribute("data-action")?c.parentElement:c,e="data-tooltip";if("mouseover"==a.type&&(!1===(b=c.getAttribute(e)?c:!!d.getAttribute(e)&&d)?this.dt.querySelector(".calendar-tooltip:not(.remove)")&&this.hideTooltip(this.dt.querySelector(".calendar-tooltip").id.slice(8)):!this.dt.querySelector("#tooltip-"+b.getAttribute(e)+"-"+b.getAttribute(e+"-time"))&&this.showTooltip(b.getAttribute(e),b,b.getAttribute(e+"-time"))),"click"==a.type){if(!d||1!=a.buttons&&1!=(a.which||a.button))return;if(d.hasAttribute("data-disabled"))return;switch(d.getAttribute("data-action")){case"prev":case"next":return this.browseView(d.getAttribute("data-action"));case"cancel":this.con.stayOpen||this.close();break;case"submit":return this.con.stayOpen||this.close(),this.selectDate(this.fetchDate(parseInt(d.getAttribute("data-date"))));case"view":return this.switchDate(d.getAttribute("data-year")||null,d.getAttribute("data-month")||null,d.getAttribute("data-day")||null),this.switchView(d.getAttribute("data-view"));}}if("keyup"==a.type){if("INPUT"!=a.target.tagName&&a.target!==this.e&&/calendar-(static|close)/i.test(this.dt.className))return!1;13==(a.keyCode||a.which)&&(this.selectDate(this.fetchDate(this.select)),a.stopPropagation(),!this.con.stayOpen&&this.close()),27!=(a.keyCode||a.which)||this.con.stayOpen||this.close()}},trigger:function(a){var b={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==a&&(j(this.e,"input",b),j(this.e,"change",b)),j(this.dt,"tail::"+a,b);for(var c=(this.events[a]||[]).length,d=0;d<c;d++)this.events[a][d].cb.apply(this,function(c,d,a){for(var b=d.length,e=0;e<b;++e)c[e-1]=d[e];return c[e]=a,c}(Array(arguments.length),arguments,this.events[a][d].args));return!0},calcPosition:function(){var d=this.dt.style,a=c.getComputedStyle(this.dt),b=parseInt(a.marginLeft)+parseInt(a.marginRight),e=parseInt(a.marginTop)+parseInt(a.marginBottom),f=function(a,b){for(b={top:a.offsetTop||0,left:a.offsetLeft||0,width:a.offsetWidth||0,height:a.offsetHeight||0};a=a.offsetParent;)b.top+=a.offsetTop,b.left+=a.offsetLeft;return b}(this.e,{});switch(d.visibility="hidden",this.con.position){case"top":var g=f.top-(this.dt.offsetHeight+e),h=f.left+f.width/2-(this.dt.offsetWidth/2+b/2);break;case"left":var g=f.top+f.height/2-(this.dt.offsetHeight/2+e),h=f.left-(this.dt.offsetWidth+b);break;case"right":var g=f.top+f.height/2-(this.dt.offsetHeight/2+e),h=f.left+f.width;break;default:var g=f.top+f.height,h=f.left+f.width/2-(this.dt.offsetWidth/2+b/2);}return d.top=(0<=g?g:this.e.offsetTop)+"px",d.left=(0<=h?h:0)+"px",d.visibility="visible",this},convertDate:function(a,b){var c={H:("00"+a.getHours()+"").toString().slice(-2),G:function(a){return a%12?a%12:12}(a.getHours()),A:12<=a.getHours()?"PM":"AM",a:12<=a.getHours()?"pm":"am",i:("00"+a.getMinutes()+"").toString().slice(-2),s:("00"+a.getSeconds()+"").toString().slice(-2),Y:a.getFullYear(),y:parseInt(a.getFullYear().toString().slice(2)),m:("00"+(a.getMonth()+1)+"").toString().slice(-2),M:this.__.months[a.getMonth()].slice(0,3),F:this.__.months[a.getMonth()],d:("00"+a.getDate()+"").toString().slice(-2),D:this.__.days[a.getDay()],l:this.__.shorts[a.getDay()].toLowerCase()};return b.replace(/([HGismd]{1,2}|[Y]{2,4}|y{2})/g,function(a){return 4==a.length||2==a.length?c[a.slice(-1)].toString().slice(-Math.abs(a.length)):1==a.length&&"0"==a[0]?c[a.slice(-1)].toString().slice(-1):c[a.slice(-1)].toString()}).replace(/(A|a|M|F|D|l)/g,function(a){return c[a]})},renderCalendar:function(){var a,b=["tail-datetime-calendar","calendar-close"],c=n.createElement("DIV"),d=!0===this.con.classNames?this.e.className:this.con.classNames;0>["top","left","right","bottom"].indexOf(this.con.position)&&(a=n.querySelector(this.con.position),b.push("calendar-static")),("string"==typeof d||d instanceof Array)&&(b=b.concat("string"==typeof d?d.split(" "):d));var e=this.con.rtl;if((!0===e||"auto"===e&&0<=["ar","he","mdr","sam","syr"].indexOf(this.con.locale))&&b.push("rtl"),this.con.stayOpen&&b.push("calendar-stay"),c.id="tail-datetime-"+this.id,c.className=b.join(" "),c.style.cssText=this.con.rtl?"direction:rtl;":"direction:ltr;",this.con.dateFormat)var f="<span class=\"action action-prev\" data-action=\"prev\"></span><span class=\"label\" data-action=\"view\" data-view=\"up\"></span><span class=\"action action-next\" data-action=\"next\"></span>";else if(this.con.timeFormat)var f="<span class=\"action action-submit\" data-action=\"submit\"></span><span class=\"label\"></span><span class=\"action action-cancel\" data-action=\"cancel\"></span>";if("undefined"!=typeof f&&(c.innerHTML="<div class=\"calendar-actions\">"+f+"</div>"),this.con.dateFormat&&this.renderDatePicker(c,this.con.viewDefault),this.con.timeFormat&&this.renderTimePicker(c),this.con.closeButton&&!a){var g=n.createElement("BUTTON"),h=this;g.className="calendar-close",g.addEventListener("click",function(a){a.preventDefault(),h.close()}),c.appendChild(g)}return c.style.cssText=a?"position:static;visibility:visible;":"top:0;left:0;z-index:999;position:absolute;visibility:hidden;",(a||document.body).appendChild(c),c},renderDatePicker:function(a,b){if((!b||0>["decades","years","months","days"].indexOf(b))&&(b=this.con.viewDays?"days":this.con.viewMonths?"months":this.con.viewYears?"years":!!this.con.viewDecades&&"decades"),!b||!this.con["view"+l(b)]||!this.con.dateFormat)return!1;var c=n.createElement("DIV");return c.className="calendar-datepicker calendar-view-"+b,c.innerHTML=this["view"+l(b)](),a.querySelector(".calendar-datepicker")?a.replaceChild(c,a.querySelector(".calendar-datepicker")):a.appendChild(c),this.view.type=b,this.handleLabel(a)},renderTimePicker:function(a){if(!this.con.timeFormat)return!1;var b=this.con.timeStepHours,c=this.con.timeStepMinutes,d=this.con.timeStepSeconds;b="<div class=\"timepicker-field timepicker-hours\"><input type=\"number\" name=\"dt[h]\" value=\"\" min=\"00\" max=\"23\" step=\""+b+"\" /><label>"+this.__.time[0]+"</label></div>",c="<div class=\"timepicker-field timepicker-minutes\"><input type=\"number\" name=\"dt[m]\" value=\"\" min=\"00\" max=\"59\" step=\""+c+"\" /><label>"+this.__.time[1]+"</label></div>",d="<div class=\"timepicker-field timepicker-seconds\"><input type=\"number\" name=\"dt[s]\" value=\"\" min=\"00\" max=\"59\" step=\""+d+"\" /><label>"+this.__.time[2]+"</label></div>";var e=n.createElement("DIV");e.className="calendar-timepicker",e.innerHTML=b+c+d;for(var f=this,g=e.querySelectorAll("input"),j=["Hours","Minutes","Seconds"],k=0;3>k;k++)g[k].value=this.view.date["get"+j[k]](),g[k].disabled=!1===this.con["time"+j[k]],g[k].addEventListener("input",function(a){f.handleTime.call(f,a,this)}),g[k].addEventListener("keydown",function(a){f.handleTime.call(f,a,this)});return a.querySelector(".calendar-timepicker")?a.replaceChild(e,a.querySelector(".calendar-timepicker")):a.appendChild(e),this.handleLabel(a)},handleTime:function(a,b){var c=parseInt(b.getAttribute("min")),d=parseInt(b.getAttribute("max")),e=parseInt(b.getAttribute("step")),f=parseInt(b.value),g="none";if(38==(a.keyCode||a.which)||f>d)var g="up";if(40==(a.keyCode||a.which)||f<c)var g="down";if("up"==g&&f+e>d){var h=1;b.value=f-(d+1)}else if("down"==g&&0>f-e){var h=-1;b.value=d+1+f}if(h&&this.con.timeIncrement&&b.parentElement.previousElementSibling){var i=b.parentElement.previousElementSibling.querySelector("input");if(!1===i.disabled)return i.value=parseInt(i.value)+h,this.handleTime({},i)}var j=b.parentElement.parentElement.querySelectorAll("input");this.selectTime(j[0].value,j[1].value,j[2].value)},handleLabel:function(a){var b,c,d=a.querySelector(".label");switch(this.view.type){case"days":b=this.__.months[this.view.date.getMonth()]+", "+this.view.date.getFullYear();break;case"months":b=this.view.date.getFullYear();break;case"years":c=parseInt(this.view.date.getFullYear().toString().slice(0,3)+"0"),b=c+" - "+(c+10);break;case"decades":c=parseInt(this.view.date.getFullYear().toString().slice(0,2)+"00"),b=c+" - "+(c+100);break;case"time":b=this.__.header[3];}return d.innerText=b,a},viewDecades:function(){var b=this.view.date.getFullYear(),d=new Date(this.view.date.getTime()),e=this.con.today?new Date().getYear():0;d.setFullYear(b-parseInt(b.toString()[3])-30);for(var f,g,h=[],j=[],k=1;16>=k;k++)f="calendar-decade"+(e>=d.getYear()&&e<=d.getYear()+10?" date-today":""),g="data-action=\"view\" data-view=\"down\" data-year=\""+d.getFullYear()+"\"",h.push("<td class=\""+f+"\" "+g+"><span class=\"inner\">"+d.getFullYear()+" - "+(d.getFullYear()+10)+"</span></td>"),4<=k&&0==k%4&&(j.push("<tr>\n"+h.join("\n")+"\n</tr>"),h=[]),d.setFullYear(d.getFullYear()+10);return"<table class=\"calendar-decades\"><thead><tr><th colspan=\"4\">"+this.__.header[2]+"</th></tr></thead><tbody>"+j.join("\n")+"</tbody></table>"},viewYears:function(){var b=this.view.date.getFullYear(),d=new Date(this.view.date.getTime()),e=this.con.today?new Date().getYear():0;d.setFullYear(b-parseInt(b.toString()[3])-2);for(var f,g,h=[],j=[],k=1;16>=k;k++)f="calendar-year"+(d.getYear()==e?" date-today":""),g="data-action=\"view\" data-view=\"down\" data-year=\""+d.getFullYear()+"\"",h.push("<td class=\""+f+"\" "+g+"><span class=\"inner\">"+d.getFullYear()+"</span></td>"),4<=k&&0==k%4&&(j.push("<tr>\n"+h.join("\n")+"\n</tr>"),h=[]),d.setFullYear(d.getFullYear()+1);return"<table class=\"calendar-years\"><thead><tr><th colspan=\"4\">"+this.__.header[1]+"</th></tr></thead><tbody>"+j.join("\n")+"</tbody></table>"},viewMonths:function(){var b=this.__.months,d=this.con.today?new Date().getMonth():-1;d=this.view.date.getYear()==new Date().getYear()?d:-1;for(var e,f,g=[],h=[],j=0;12>j;j++)e="calendar-month"+(d==j?" date-today":""),f="data-action=\"view\" data-view=\"down\" data-month=\""+j+"\"",g.push("<td class=\""+e+"\" "+f+"><span class=\"inner\">"+b[j]+"</span></td>"),3==g.length&&(h.push("<tr>\n"+g.join("\n")+"\n</tr>"),g=[]);return"<table class=\"calendar-months\"><thead><tr><th colspan=\"3\">"+this.__.header[0]+"</th></tr></thead><tbody>"+h.join("\n")+"</tbody></table>"},viewDays:function(){var b,d,e,f,g,h=new Date(this.view.date.getTime()),j=new Date().toDateString(),k=h.getMonth(),l=[],m=[],n=[0,[]],o=[].concat(this.con.dateRanges),p=[].concat(this.con.tooltips),q=[0,0];for(h.setHours(0,0,0,0),h.setDate(1),h.setDate(1-(h.getDay()-this.con.weekStart));6>m.length;)b=h.getTime(),e="data-action=\"submit\" data-date=\""+h.getTime()+"\"",d="calendar-day date-"+(h.getMonth()>k?"next":h.getMonth()<k?"previous":"current"),this.con.today&&j==h.toDateString()&&(d+=" date-today"),this.con.dateBlacklist&&(b<this.con.dateStart||b>this.con.dateEnd)?n=[b<this.con.dateStart?this.con.dateStart:1/0,[0,1,2,3,4,5,6],!0]:0==n[0]?o=o.filter(function(a){return a.start==1/0||b>=a.start&&b<=a.end?(n=[a.end,a.days],!1):a.start>b},this):3==n.length&&(n=[0,[0,1,2,3,4,5,6]]),0<this.con.tooltips.length&&(p=this.con.tooltips.filter(function(a,c){a.date instanceof Array?a.date[0]<=b&&a.date[1]>=b&&(q=[a.date[1],c,a.color]):a.date==b&&(q=[a.date,c,a.color])},this)),q[0]<b&&(q=[0,0]),g=n[0]>=b&&0<=n[1].indexOf(h.getDay()),g&&this.con.dateBlacklist||!g&&!this.con.dateBlacklist?(d+=" date-disabled",e+=" data-disabled=\"true\""):0!==n[0]&&n[0]<=b&&(n=[0,[]]),this.select&&this.select.toDateString()==h.toDateString()&&(d+=" date-select"),f="<span class=\"inner\">"+h.getDate()+"</span>",0<q[0]&&(d+=" date-tooltip",e+=" data-tooltip=\""+q[1]+"\" data-tooltip-time=\""+b+"\"",f+="inherit"===q[2]?"<span class=\"tooltip-tick\"></span>":"<span class=\"tooltip-tick\" style=\"background:"+q[2]+";\"></span>"),l.push("<td class=\""+d+"\" "+e+">"+f+"</td>"),7==l.length&&(m.push("<tr>\n"+l.join("\n")+"\n</tr>"),l=[]),h.setDate(h.getDate()+1);return m="<tbody>"+m.join("\n")+"</tbody>","<table class=\"calendar-days\">"+this.weekdays+m+"</table>"},showTooltip:function(a,b,c){var f,g,i=this.con.tooltips[a].element,j=i.style,e=this.dt.querySelector(".calendar-datepicker");j.cssText="opacity:0;visibility:hidden;",i.id="tooltip-"+a+"-"+c,e.appendChild(i),f=i.offsetWidth,g=i.offsetHeight,j.top=b.offsetTop+b.offsetHeight+"px",j.left=b.offsetLeft+b.offsetWidth/2-f/2+"px",j.visibility="visible",this.con.animate?(i.setAttribute("data-top",parseInt(j.top)),j.top=parseInt(j.top)+5+"px",function a(){parseFloat(j.top)>i.getAttribute("data-top")&&(j.top=parseFloat(j.top)-.5+"px"),1>(j.opacity=parseFloat(j.opacity)+.125)&&setTimeout(a,20)}()):j.opacity=1},hideTooltip:function(a){var b=this.dt.querySelector("#tooltip-"+a),c=b.style;this.con.animate?(b.className+=" remove",function a(){return parseFloat(c.top)<parseInt(b.getAttribute("data-top"))+5&&(c.top=parseFloat(c.top)+.5+"px"),0>(c.opacity-=.125)?(b.className="calendar-tooltip")?b.parentElement.removeChild(b):"":void setTimeout(a,20)}()):b.parentElement.removeChild(b)},switchView:function(a){var b=[null,"days","months","years","decades",null];return(-1==b.indexOf(a)&&("up"==a?a=b[(b.indexOf(this.view.type)||5)+1]||null:"down"==a&&(a=b[(b.indexOf(this.view.type)||1)-1]||null),!(a&&this.con["view"+l(a)])&&(a=!1)),!!a)&&(this.renderDatePicker(this.dt,a),this.trigger("view",a))},switchDate:function(a,b,c,d){if(this.view.date.setFullYear(null==a?this.view.date.getFullYear():a),this.view.date.setMonth(null==b?this.view.date.getMonth():b),"auto"==c){var e=this.view.date,f=new Date;c=e.getMonth()==f.getMonth()&&e.getYear()==f.getYear()?f.getDate():1}return this.view.date.setDate(c||this.view.date.getDate()),!0===d||this.switchView(this.view.type)},switchMonth:function(a,b){return"string"==typeof a&&(a=0<=["previous","prev"].indexOf(a)?-1:1,a=this.view.date.getMonth()+type),this.switchDate(b||this.getFullYear(),a)},switchYear:function(a){return"string"==typeof a&&(a=0<=["previous","prev"].indexOf(a)?-1:1,a=this.view.date.getFullYear()+type),this.switchDate(a)},browseView:function(a){switch(a=0<=["previous","prev"].indexOf(a)?-1:1,this.view.type){case"days":return this.switchDate(null,this.view.date.getMonth()+a,"auto");case"months":return this.switchDate(this.view.date.getFullYear()+a,null,"auto");case"years":return this.switchDate(this.view.date.getFullYear()+10*a,null,"auto");case"decades":return this.switchDate(this.view.date.getFullYear()+100*a,null,"auto");}return!1},fetchDate:function(a){a=m(a||!1)||this.view.date;var b=this.dt.querySelectorAll("input[type=number]");return b&&3==b.length&&a.setHours(b[0].value||0,b[1].value||0,b[2].value||0,0),a},selectDate:function(a,b,c,d,e,g){var h=new Date,i=[];return this.con.dateFormat?i.push(this.con.dateFormat):null,this.con.timeFormat?i.push(this.con.timeFormat):null,this.select=a instanceof Date?a:new Date(a?a:null==a?this.view.date.getFullYear():h.getFullYear(),b?b:null==b?this.view.date.getMonth():h.getMonth(),c?c:null==c?this.view.date.getDate():h.getDate(),d?d:null==d?this.view.date.getHours():0,e?e:null==e?this.view.date.getMinutes():0,g?g:null==g?this.view.date.getSeconds():0),this.view.date=new Date(this.select.getTime()),this.e.value=this.convertDate(this.select,i.join(" ")),this.e.setAttribute("data-value",this.select.getTime()),this.switchView("days"),this.trigger("change")},selectTime:function(a,b,c){return this.selectDate(void 0,void 0,void 0,a,b,c)},open:function(){if(!f(this.dt,"calendar-close"))return this;var a=this,b=this.dt.style;return b.opacity=this.con.animate?0:1,b.display="block",g(h(this.dt,"calendar-close"),"calender-idle"),f(this.dt,"calendar-static")?null:this.calcPosition(),function c(){return 1<=(b.opacity=parseFloat(b.opacity)+.125)?(g(h(a.dt,"calendar-idle"),"calendar-open"),a.trigger("open")):void setTimeout(c,20)}(),this},close:function(){if(!f(this.dt,"calendar-open"))return this;var a=this,b=this.dt.style;return g(h(this.dt,"calendar-open"),"calender-idle"),b.opacity=this.con.animate?1:0,b.display="block",function c(){return 0>=(b.opacity-=.125)?(g(h(a.dt,"calendar-idle"),"calendar-close"),b.display="none",a.trigger("close")):void setTimeout(c,20)}(),this},toggle:function(){return f(this.dt,"calendar-open")?this.close():f(this.dt,"calendar-close")?this.open():this},on:function(a,b,c){return!(0>["open","close","change","view"].indexOf(a)||"function"!=typeof b)&&(a in this.events||(this.events[a]=[]),this.events[a].push({cb:b,args:c instanceof Array?c:[]}),this)},remove:function(){return this.e.removeAttribute("data-tail-datetime"),this.e.removeAttribute("data-value"),this.dt.parentElement.removeChild(this.dt),this},reload:function(){return this.remove(),this.init()},config:function(a,b){if(a instanceof Object){for(var c in a)this.config(c,a[c],!1);return this.reload(),this.con}return"undefined"==typeof a?this.con:!!(a in this.con)&&("undefined"==typeof b?this.con[a]:(this.con[a]=b,!1!==this.rebuild&&this.reload(),this))}},a});
